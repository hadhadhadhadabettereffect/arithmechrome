var iterator,styleNode,colors,__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),nodes=[],ColorDigit=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(HTMLSpanElement);function wrapNumbers(){var e,t=performance.now(),o=iterator.nextNode();do{if(o&&/\d/.test(o.textContent)&&nodes.push(o),!(o=iterator.nextNode()))break;e=performance.now()}while(e-t<3);o?requestAnimationFrame(wrapNumbers):(nodes=nodes.reverse(),requestAnimationFrame(swapHTML))}function swapHTML(){var e,t=performance.now();do{if(!nodes.length)break;(e=nodes.pop()).innerHTML=e.textContent.replace(/\d/g,"<colordigit class='n$&'>$&</colordigit>")}while(void 0-t<3);nodes.length&&requestAnimationFrame(swapHTML)}function startIterator(){iterator=document.createNodeIterator(document.body,NodeFilter.SHOW_ELEMENT,function(e){return e.firstChild&&3===e.firstChild.nodeType&&"SCRIPT"!=e.nodeName&&"NOSCRIPT"!=e.nodeName&&"STYLE"!=e.nodeName&&/\d/.test(e.firstChild.textContent)?1:2}),requestAnimationFrame(wrapNumbers)}function writeCSS(){styleNode||(styleNode=document.createElement("style"),document.head.appendChild(styleNode));for(var e="colordigit{background:"+colors[10]+"}",t=0;t<10;++t)e+="colordigit.n"+t+"{color:"+colors[t]+"}";styleNode.innerHTML=e}function removeCSS(){styleNode&&(document.head.removeChild(styleNode),styleNode=null)}document.addEventListener("DOMContentLoaded",function(e){window.customElements.define("colordigit",ColorDigit)}),chrome.runtime.onMessage.addListener(function(e,t,o){colors=e.colors,e.active?(requestAnimationFrame(writeCSS),iterator||startIterator()):requestAnimationFrame(removeCSS)});