var activeIcons={16:"icons/active/icon16.png",24:"icons/active/icon24.png",32:"icons/active/icon32.png"},inactiveIcons={16:"icons/inactive/icon16.png",24:"icons/inactive/icon24.png",32:"icons/inactive/icon32.png"},options={colors:["#888888","#000000","#67a4ff","#fb1515","#0c52ef","#18713c","#5a0eaf","#f5970c","#000080","#6b0000","none"],active:!0,usebg:!1,background:0};function onTabChange(o){chrome.tabs.sendMessage(o.tabId,{active:options.active,colors:options.colors})}function onTabsUpdate(o,n,e){"complete"==n.status&&chrome.tabs.sendMessage(o,{active:options.active,colors:options.colors})}function onOptionsUpdate(o,n){if("sync"==n){for(var e in o)options[e]=o[e].newValue;o.hasOwnProperty("active")&&updateIcon(),msgTab()}}function msgTab(){chrome.tabs.query({currentWindow:!0,active:!0},function(o){chrome.tabs.sendMessage(o[0].id,{active:options.active,colors:options.colors})})}function updateIcon(){chrome.browserAction.setIcon({path:options.active?activeIcons:inactiveIcons})}chrome.storage.onChanged.addListener(onOptionsUpdate),chrome.tabs.onUpdated.addListener(onTabsUpdate),chrome.tabs.onActivated.addListener(onTabChange),chrome.storage.sync.get(options,function(o){(options=o).active?msgTab():updateIcon()}),chrome.browserAction.onClicked.addListener(function(o){options.active=!options.active,chrome.storage.sync.set(options)});